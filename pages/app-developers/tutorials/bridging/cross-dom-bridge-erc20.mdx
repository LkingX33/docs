---
title: Bridging ERC-20 tokens to OP Mainnet
description: >-
  Learn how to use the @eth-optimism/viem package to transfer ERC-20 tokens between Layer 1
  (Ethereum or Sepolia) and Layer 2 (OP Mainnet or OP Sepolia).
lang: en-US
content_type: tutorial
topic: bridging-erc-20-tokens-to-op-mainnet
personas:
  - app-developer
categories:
  - cross-chain-messaging
  - standard-bridge
  - devnets
  - mainnet
  - testnet
is_imported_content: 'false'
---

import { Callout, Steps } from 'nextra/components'

# Bridging ERC-20 tokens to OP Mainnet



This tutorial explains how you can use [@eth-optimism/viem](https://www.npmjs.com/package/@eth-optimism/viem) to bridge ERC-20 tokens from L1 (Ethereum or Sepolia) to L2 (OP Mainnet or OP Sepolia).
The `@eth-optimism/viem` package is an easy way to add bridging functionality to your javascript-based application.
It also provides some safety rails to prevent common mistakes that could cause tokens to be made inaccessible.

Behind the scenes, `@eth-optimism/viem` package uses the [Standard Bridge](/app-developers/bridging/standard-bridge) contracts to transfer tokens.
Make sure to check out the [Standard Bridge guide](/app-developers/bridging/standard-bridge) if you want to learn more about how the bridge works under the hood.

<Callout type="error">
  The Standard Bridge **does not** support [**fee on transfer
  tokens**](https://github.com/d-xo/weird-erc20#fee-on-transfer) or [**rebasing
  tokens**](https://github.com/d-xo/weird-erc20#balance-modifications-outside-of-transfers-rebasingairdrops)
  because they can cause bridge accounting errors.
</Callout>

## Supported networks

The `@eth-optimism/viem` package supports any of the [Superchain networks](/superchain/networks).
If you want to use a network that isn't included by default, you can simply [instantiate the package with the appropriate contract addresses](/app-developers/get-started).

## Dependencies

*   [node](https://nodejs.org/en/)
*   [pnpm](https://pnpm.io/installation)

## Create a demo project

You're going to use the `@eth-optimism/viem` package for this tutorial.
Since the `@eth-optimism/viem` package is a [Node.js](https://nodejs.org/en/) library, you'll need to create a Node.js project to use it.

<Steps>
  {<h3>Make a Project Folder</h3>}

  ```bash
  mkdir bridging-erc20-tokens
  cd bridging-erc20-tokens
  ```

  {<h3>Initialize the Project</h3>}

  ```bash
  pnpm init
  ```

  {<h3>Install the `@eth-optimism/viem`</h3>}

  ```bash
  pnpm add @eth-optimism/viem
  ```

  {<h3>Install viem</h3>}

  ```bash
  pnpm add viem
  ```
</Steps>

<Callout type="info">
  Want to create a new wallet for this tutorial? If you have
  [`cast`](https://book.getfoundry.sh/getting-started/installation) installed
  you can run `cast wallet new` in your terminal to create a new wallet and get
  the private key.
</Callout>

## Get ETH on Sepolia and OP Sepolia

This tutorial explains how to bridge tokens from Sepolia to OP Sepolia.
You will need to get some ETH on both of these testnets.

<Callout type="info">
  You can use [this faucet](https://sepoliafaucet.com) to get ETH on Sepolia.
  You can use the [Superchain
  Faucet](https://console.optimism.io/faucet?utm_source=docs) to get ETH on OP
  Sepolia.
</Callout>

## Add a private key to your environment

You need a private key to sign transactions.
Set your private key as an environment variable with the `export` command.
Make sure this private key corresponds to an address that has ETH on both Sepolia and OP Sepolia.

```bash
export TUTORIAL_PRIVATE_KEY=0x...
```

## Start the Node REPL

You're going to use the Node REPL to interact with the `@eth-optimism/viem`.
To start the Node REPL, run the following command in your terminal:

```bash
node
```

This will bring up a Node REPL prompt that allows you to run javascript code.

## Import dependencies

You need to import some dependencies into your Node REPL session.

<Steps>
  {<h3>Import the `@eth-optimism/viem` package</h3>}

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L2-L6 hash=30c1b8fdaa0ae421d3c5ccca087768a4
  ```

</Steps>

## Set session variables

You'll need a few variables throughout this tutorial.
Let's set those up now.

<Steps>
  {<h3>Load your private key</h3>}

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L9-L10 hash=6a160f7ff083969091e72c90e1138563
  ```

  {<h3>Create the RPC providers and wallets</h3>}

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L12-L35 hash=ed9620d94ad7d545fcfd286ec41f7654
  ```

  {<h3>Set the L1 and L2 ERC-20 addresses</h3>}

  This tutorial uses existing ERC-20 tokens that have been deployed on Sepolia and OP Sepolia.
  These tokens are designed for testing the bridging process.

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L38-L39 hash=c2923828fd372202af37fc3022de7e75
  ```

  <Callout>
    If you're coming from the [Bridging Your Standard ERC-20 Token to OP Mainnet
    Using the Standard Bridge](./standard-bridge-standard-token) or [Bridging Your
    Custom ERC-20 Token to OP Mainnet Using the Standard
    Bridge](./standard-bridge-custom-token) tutorials, you can use the addresses
    of your own ERC-20 tokens here instead.
  </Callout>
</Steps>

<Steps>
  {<h3>Set the ERC20 ABI</h3>}

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L42-L84 hash=e770998acb63edd0a2683e1821589e7c
  ```

  {<h3>Check initial balance</h3>}

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L86-L99 hash=d0a5ecad5f27344a5e45e186a60a935f
  ```

</Steps>

## Deposit tokens

Now that you have some tokens on L1, you can deposit those tokens into the `L1StandardBridge` contract.
You'll then receive the same number of tokens on L2 in return.

<Steps>
  {<h3>Define the amount to deposit</h3>}

  The testing token has 18 decimal places, so you'll want to define a variable that represents one token.

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L102-L104 hash=9a3bfb2443d7d9de23a418ad11992007
  ```

  {<h3>Allow the Standard Bridge to access your tokens</h3>}

  Before you can deposit your tokens, you'll need to give the Standard Bridge contract an allowance of tokens on L1.
  This will allow the Standard Bridge to pull these tokens out of your address and escrow inside the bridge.

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L106-L113 hash=1019de7f356be5903cf655801d55eecb
  ```

  {<h3>Wait for approval</h3>}

  Wait for approval transaction to be relayed.

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L116-L121 hash=808ed3788e47f5af11ece6192a19653b
  ```

  {<h3>Deposit your tokens</h3>}

  Now you can deposit your tokens into the Standard Bridge contract.

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L124-L135 hash=1621f7bc18b57a6e960c9b5beba9958c
  ```

  <Callout>
    Using a smart contract wallet? As a safety measure, `depositERC20` will fail
    if you try to deposit ETH from a smart contract wallet without specifying a
    `recipient`. Add the `recipient` option to the `depositERC20` call to fix
    this. Check out the [@eth-optimism/viem
    docs](https://github.com/ethereum-optimism/ecosystem/tree/main/packages/viem) for
    more info on the options you can pass to `depositERC20`.
  </Callout>

  {<h3>Wait for the deposit to be relayed</h3>}

  You can use the `waitForTransactionReceipt` function to wait for the deposit to be relayed to L2.

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L138-L143 hash=1399607e74622853a9dee75e750d2ef3
  ```

  {<h3>Check your token balance on L2</h3>}

  You should now have one more token on L2.

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L149-L156 hash=d174885b0097c830e1a4ea5a8e325def
  ```

    {<h3>Check your token balance on L1</h3>}

  You should now have one less token on L1.

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L159-L166 hash=8077233cab79012607c0e83356a5d9a3
  ```

</Steps>

## Withdraw tokens

You just bridged some tokens from L1 to L2.
Nice!
Now you're going to repeat the process in reverse to bridge some tokens from L2 to L1.

<Steps>

  {<h3>Check your token balance on L2</h3>}

  You should now have one less token on L2, but your token balance on L1 will not have changed yet.

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L177-L191 hash=e82925487d171ad4eace7327487e72a8
  ```

    {<h3>Get the standard bridge address</h3>}

  You'll use `opSepolia.contracts.l2StandardBridge.address` to get the standard bridge address and convert amount to proper units.

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L194-L197 hash=23d9557e5ac89f15e9a9c2d0b682a249
  ```

    {<h3>Initiate the withdrawal</h3>}

  To withdraw tokens from L2 to L1 is to prove to the bridge on L1 that the withdrawal happened on L2.
  We are going to use the `withdrawOptimismERC20` function for that.

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L202-L209 hash=1fbb5e09387d64b392e7b577c1125f9a
  ```

  {<h3>Wait until the withdrawal is ready to prove</h3>}

  The second step to withdrawing tokens from L2 to L1 is to prove to the bridge on L1 that the withdrawal happened on L2.
  You first need to wait until the withdrawal is ready to prove.

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L212-L217 hash=f727f366d60fcde1fcc7d0666ad5195c
  ```

  <Callout type="info">
    This step can take a few minutes. Feel free to take a quick break while you
    wait.
  </Callout>

  {<h3>Check your token balance on L1</h3>}

  You should now have one more token on L1.

  ```js file=<rootDir>/public/tutorials/cross-dom-bridge-erc20.js#L222-L229 hash=e44221feb947671197dc6ce99a6f1158
  ```
</Steps>

## Next steps

Congrats!
You've just deposited and withdrawn tokens using `@eth-optimism/viem` package.
You should now be able to write applications that use the `@eth-optimism/viem` package to transfer ERC-20 tokens between L1 and L2.
Although this tutorial used Sepolia and OP Sepolia, the same process works for Ethereum and OP Mainnet.
